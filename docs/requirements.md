# 魚MCPサーバー要件定義書

## プロジェクト概要
日本語で魚を検索し、基本情報と画像を返すMCPサーバーを開発する。

## 背景・動機
- 4歳の子供が魚好きで、日本語で簡単に魚の情報を調べられるツールが欲しい
- MCPサーバーの技術記事を書くための実践的なサンプルとして開発
- FishBase APIとSQLiteの組み合わせで技術的に興味深い実装が可能

## ミニマム要件（MVP）

### 基本機能
1. **日本語検索機能**
   - 入力: 日本語の魚名（例: "マグロ"）
   - 処理: 日本語名から魚を特定
   - 出力: 該当する魚の情報

2. **情報表示**
   - 和名（日本語名）
   - 学名（Scientific name）
   - 科名（Family）
   - 画像URL（1枚）

### 技術要件
- 言語: TypeScript
- MCPフレームワーク: @anthropic-ai/sdk
- データソース: FishBase API (S3 Parquet形式)
- 画像ソース: iNaturalist API または Wikipedia API

### 非機能要件
- レスポンス時間: 3秒以内
- エラーハンドリング: 魚が見つからない場合の適切なメッセージ
- ログ出力: デバッグ用のログ機能

## 将来の拡張機能（Phase 2以降）
- オフライン対応（SQLiteキャッシュ）
- 複数画像表示
- 生息地情報
- お子さん向けクイズモード
- 曖昧検索（ひらがな/カタカナ対応）

## 技術的な検討事項

### FishBase API
- S3 API形式でParquetファイルとして提供
- 必要なテーブル:
  - comnames.parquet（日本語を含む一般名）
  - taxa.parquet（学名、分類情報）
- アクセス制限なし、認証不要

### データ処理方針
- 初期案: 起動時に日本語名-学名の対応表をメモリに読み込み
- 検索は完全一致から開始、後に部分一致を追加

### 画像取得
- 第1候補: iNaturalist API（認証不要、豊富な画像）
- 第2候補: Wikipedia API（安定性高い）
- フォールバック: デフォルト画像を返す

## 制約事項
- FishBaseの日本語データが不完全な可能性
- 画像APIのレート制限
- 著作権への配慮（画像使用時）

## 成功基準
1. 「マグロ」で検索して適切な結果が返る
2. 基本情報と画像が表示される
3. エラー時も適切なメッセージが返る
4. 開発者が簡単にセットアップできる